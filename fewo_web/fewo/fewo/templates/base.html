{% load static %}
<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}FeWo Verwaltung{% endblock %}</title>
    <link href="{% static 'css/output.css' %}" rel="stylesheet">
    <link href="{% static 'css/custom.css' %}" rel="stylesheet">
</head>

<body>
    {% block header_logo %}{% endblock %}
    <div class="flex min-h-screen bg-slate-50">
        {% block sidebar %}
        <aside class="w-[260px] bg-white border-r border-slate-200 p-6 flex flex-col">
            <div class="text-xl font-bold text-blue-600 mb-8 flex items-center gap-2">
                <a href="{% if user.is_authenticated %}{% url 'home' %}{% else %}{% url 'landing' %}{% endif %}"
                    class="text-inherit no-underline hover:text-blue-700 transition-colors">FeWo Verwaltung</a>
            </div>
            <nav>
                <ul class="list-none p-0 m-0 flex flex-col gap-2">
                    <li><a href="{% url 'customer_list' %}"
                            class="flex items-center px-4 py-3 rounded-lg transition-all font-medium {% if 'customers' in request.path %}bg-blue-50 text-blue-600{% else %}text-slate-500 hover:bg-blue-50 hover:text-blue-600{% endif %}">Kunden</a>
                    </li>
                    <li><a href="{% url 'property_list' %}"
                            class="flex items-center px-4 py-3 rounded-lg transition-all font-medium {% if 'properties' in request.path %}bg-blue-50 text-blue-600{% else %}text-slate-500 hover:bg-blue-50 hover:text-blue-600{% endif %}">Ferienwohnungen</a>
                    </li>
                    <li><a href="{% url 'invoice_list' %}"
                            class="flex items-center px-4 py-3 rounded-lg transition-all font-medium {% if 'invoices' in request.path %}bg-blue-50 text-blue-600{% else %}text-slate-500 hover:bg-blue-50 hover:text-blue-600{% endif %}">Rechnungen</a>
                    </li>
                </ul>
            </nav>
            {% if user.is_authenticated %}
            <div class="mt-auto pt-6 border-t border-slate-200">
                <div class="mb-3 text-slate-500 text-sm">
                    Angemeldet als <strong>{{ user.username }}</strong>
                </div>

                {% if not user.profile.has_subscription %}
                <a href="{% url 'subscription' %}"
                    class="block text-yellow-500 no-underline mb-2 text-sm py-1 font-bold hover:text-yellow-600 transition-colors">
                    ‚≠ê Jetzt abonnieren
                </a>
                {% endif %}

                <a href="{% url 'profile_settings' %}"
                    class="block text-slate-700 no-underline mb-2 text-sm py-1 hover:text-blue-600 transition-colors">
                    ‚öôÔ∏è Einstellungen
                </a>

                <form action="{% url 'logout' %}" method="post">
                    {% csrf_token %}
                    <button type="submit"
                        class="bg-transparent border-none p-0 py-1 text-red-500 text-sm cursor-pointer w-full text-left hover:text-red-700 transition-colors">
                        üö™ Abmelden
                    </button>
                </form>
            </div>
            {% endif %}
        </aside>
        {% endblock %}
        <main class="flex-1 p-8 overflow-y-auto">
            {% if messages %}
            <div class="messages mb-4">
                {% for message in messages %}
                <div class="bg-blue-50 text-blue-800 border border-blue-200 rounded-xl p-6 mb-6 shadow-sm">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}
            {% block content %}{% endblock %}
        </main>
    </div>
</body>

</html>